{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\katri\\\\CascadeProjects\\\\blockchain-voting-platform\\\\client\\\\src\\\\components\\\\voting\\\\VotingInterface.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Container, Card, Row, Col, Form, Button, Alert, Spinner, Modal } from 'react-bootstrap';\nimport { ethers } from 'ethers';\nimport { toast } from 'react-toastify';\nimport { useTranslation } from 'react-i18next';\nimport AuthContext from '../../context/AuthContext';\nimport { formatTimestamp, isElectionActive } from '../../utils/contractUtils';\nimport { validateApiUrl, safeParseInt, validateElectionStatus, handleApiError, createLoadingState, updateLoadingState } from '../../utils/validationUtils';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst VotingInterface = () => {\n  _s();\n  const {\n    t\n  } = useTranslation();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [electionState, setElectionState] = useState(createLoadingState());\n  const election = electionState.data;\n  const [voterStatus, setVoterStatus] = useState({\n    isRegistered: false,\n    hasVoted: false\n  });\n  const [selectedCandidate, setSelectedCandidate] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\n  const {\n    isAuthenticated,\n    userAddress,\n    contract,\n    signer\n  } = useContext(AuthContext);\n  const [error, setError] = useState('');\n  useEffect(() => {\n    if (!isAuthenticated) {\n      navigate('/login');\n      return;\n    }\n    const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n    if (!validateApiUrl(apiUrl)) {\n      navigate('/error');\n      return;\n    }\n    fetchElectionDetails();\n  }, [id, isAuthenticated, navigate]);\n  useEffect(() => {\n    if (isAuthenticated && userAddress && electionState.data) {\n      checkVoterStatus();\n    }\n  }, [isAuthenticated, userAddress, electionState.data]);\n  const fetchElectionDetails = async () => {\n    try {\n      setElectionState(updateLoadingState(electionState, {\n        loading: true\n      }));\n      const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n      if (!validateApiUrl(apiUrl)) {\n        throw new Error('URL de API inválida');\n      }\n      const response = await fetch(`${apiUrl}/api/elections/${id}`);\n      const data = await response.json();\n      if (!(data !== null && data !== void 0 && data.success)) {\n        throw new Error((data === null || data === void 0 ? void 0 : data.message) || 'Error al obtener detalles de la elección');\n      }\n      const election = data.election;\n      if (!validateElectionStatus(election)) {\n        navigate(`/elections/${id}`);\n        return;\n      }\n      setElectionState(updateLoadingState(electionState, {\n        data: election\n      }));\n    } catch (error) {\n      const errorMessage = handleApiError(error);\n      setElectionState(updateLoadingState(electionState, {\n        error: errorMessage\n      }));\n    } finally {\n      setElectionState(updateLoadingState(electionState, {\n        loading: false\n      }));\n    }\n  };\n  const checkVoterStatus = async () => {\n    try {\n      if (!isAuthenticated || !userAddress) return;\n      const token = localStorage.getItem('auth_token');\n      if (!token) {\n        throw new Error('Token de autenticación no encontrado');\n      }\n      const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n      if (!validateApiUrl(apiUrl)) {\n        throw new Error('URL de API inválida');\n      }\n      const response = await fetch(`${apiUrl}/api/voters/status/${id}`, {\n        headers: {\n          'x-auth-token': token,\n          'Content-Type': 'application/json'\n        }\n      });\n      const data = await response.json();\n      if (!(data !== null && data !== void 0 && data.success)) {\n        throw new Error((data === null || data === void 0 ? void 0 : data.message) || 'Error al verificar estado de votante');\n      }\n      const status = data.status;\n      setVoterStatus(status);\n\n      // Redirect if not registered or already voted\n      if (!status.isRegistered) {\n        toast.error('No estás registrado para esta elección');\n        setTimeout(() => navigate(`/elections/${id}`), 2000);\n      } else if (status.hasVoted) {\n        toast.info('Ya has votado en esta elección');\n        setTimeout(() => navigate(`/elections/${id}`), 2000);\n      }\n    } catch (error) {\n      const errorMessage = handleApiError(error);\n      toast.error(errorMessage);\n    }\n  };\n  const handleCandidateChange = e => {\n    setSelectedCandidate(e.target.value);\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!selectedCandidate) {\n      toast.error('Please select a candidate');\n      return;\n    }\n    setShowConfirmModal(true);\n  };\n  const confirmVote = async () => {\n    try {\n      setSubmitting(true);\n\n      // Close the modal\n      setShowConfirmModal(false);\n      if (!contract || !signer) {\n        throw new Error('Blockchain connection not established');\n      }\n\n      // Get the JWT token for authentication\n      const token = localStorage.getItem('auth_token');\n\n      // Step 1: Get transaction data from the server\n      const prepResponse = await fetch(`${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/api/voters/vote`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-auth-token': token\n        },\n        body: JSON.stringify({\n          electionId: id,\n          candidateId: selectedCandidate\n        })\n      });\n      const prepData = await prepResponse.json();\n      if (!prepData.success) {\n        throw new Error(prepData.message || 'Failed to prepare vote transaction');\n      }\n\n      // Step 2: Sign and send the transaction\n      const contractWithSigner = contract.connect(signer);\n      toast.info('Please confirm the transaction in your wallet');\n\n      // Execute the vote transaction\n      const tx = await contractWithSigner.castVote(id, selectedCandidate);\n      toast.info('Transaction submitted. Waiting for confirmation...');\n\n      // Wait for transaction confirmation\n      const receipt = await tx.wait();\n      toast.success('Your vote has been successfully recorded on the blockchain!');\n\n      // Redirect to election details page\n      navigate(`/elections/${id}`);\n    } catch (error) {\n      console.error('Error casting vote:', error);\n      setError(error.message || 'Failed to cast vote. Please try again.');\n      toast.error(error.message || 'Failed to cast vote');\n    } finally {\n      setSubmitting(false);\n      setShowConfirmModal(false);\n    }\n  };\n  if (electionState.loading) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"text-center my-5\",\n      children: [/*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\",\n        role: \"status\",\n        variant: \"primary\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"visually-hidden\",\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-3\",\n        children: \"Loading voting interface...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"my-5\",\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: fetchElectionDetails,\n        children: \"Retry\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outline-secondary\",\n        className: \"ms-2\",\n        onClick: () => navigate(`/elections/${id}`),\n        children: \"Back to Election\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this);\n  }\n  if (!election || !election.candidates || election.candidates.length === 0) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"my-5\",\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"warning\",\n        children: t('voting.no_candidates_available')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outline-secondary\",\n        onClick: () => navigate(`/elections/${id}`),\n        children: t('election_details.back_button')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"mb-4\",\n      children: \"Cast Your Vote\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"mb-4 shadow-sm\",\n      children: /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n          children: election.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n          children: election.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"small text-muted\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Start:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 18\n            }, this), \" \", formatTimestamp(election.startTime)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"End:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 18\n            }, this), \" \", formatTimestamp(election.endTime)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        lg: 8,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"shadow-sm\",\n          children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n            children: /*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"mb-0\",\n              children: \"Select a Candidate\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: /*#__PURE__*/_jsxDEV(Form, {\n              onSubmit: handleSubmit,\n              children: [election.candidates.map(candidate => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-3\",\n                children: /*#__PURE__*/_jsxDEV(Card, {\n                  className: `border ${selectedCandidate === candidate.id.toString() ? 'border-primary' : ''}`,\n                  children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                    children: /*#__PURE__*/_jsxDEV(Form.Check, {\n                      type: \"radio\",\n                      id: `candidate-${candidate.id}`,\n                      name: \"candidateSelection\",\n                      value: candidate.id,\n                      checked: selectedCandidate === candidate.id.toString(),\n                      onChange: handleCandidateChange,\n                      label: /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                          children: candidate.name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 269,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"mb-0 text-muted\",\n                          children: candidate.description\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 270,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 268,\n                        columnNumber: 29\n                      }, this),\n                      className: \"d-flex align-items-start gap-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 260,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 259,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 21\n                }, this)\n              }, candidate.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 19\n              }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-grid gap-2 mt-4\",\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  variant: \"primary\",\n                  size: \"lg\",\n                  disabled: !selectedCandidate || submitting,\n                  children: submitting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(Spinner, {\n                      as: \"span\",\n                      animation: \"border\",\n                      size: \"sm\",\n                      role: \"status\",\n                      \"aria-hidden\": \"true\",\n                      className: \"me-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 289,\n                      columnNumber: 25\n                    }, this), \"Processing...\"]\n                  }, void 0, true) : 'Submit Vote'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outline-secondary\",\n                  onClick: () => navigate(`/elections/${id}`),\n                  disabled: submitting,\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 303,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        lg: 4,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"shadow-sm\",\n          children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n            children: /*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"mb-0\",\n              children: \"Voting Information\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(Alert, {\n              variant: \"info\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-info-circle me-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 17\n              }, this), \"Your vote will be securely recorded on the blockchain. This requires a small transaction fee.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                children: \"How Voting Works:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n                className: \"small ps-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Select your preferred candidate\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Confirm your selection\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 331,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Sign the transaction with your wallet\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Wait for blockchain confirmation\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                children: \"Important Notes:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"small ps-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Your vote is anonymous\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"You can only vote once\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 341,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Votes cannot be changed after submission\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"You need enough ETH in your wallet for gas fees\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showConfirmModal,\n      onHide: () => setShowConfirmModal(false),\n      centered: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Confirm Your Vote\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: election.candidates && selectedCandidate !== '' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"You are about to vote for:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"mb-3\",\n            children: election.candidates[parseInt(selectedCandidate)].name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Alert, {\n            variant: \"warning\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-exclamation-triangle me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 17\n            }, this), \"This action cannot be undone once confirmed on the blockchain.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: () => setShowConfirmModal(false),\n          disabled: submitting,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: confirmVote,\n          disabled: submitting,\n          children: submitting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Spinner, {\n              as: \"span\",\n              animation: \"border\",\n              size: \"sm\",\n              role: \"status\",\n              \"aria-hidden\": \"true\",\n              className: \"me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 17\n            }, this), \"Processing...\"]\n          }, void 0, true) : 'Confirm Vote'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 234,\n    columnNumber: 5\n  }, this);\n};\n_s(VotingInterface, \"NAOyA1TEWudJKfNMouNKLgtxOWE=\", false, function () {\n  return [useTranslation, useParams, useNavigate];\n});\n_c = VotingInterface;\nexport default VotingInterface;\nvar _c;\n$RefreshReg$(_c, \"VotingInterface\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useCallback","useParams","useNavigate","Container","Card","Row","Col","Form","Button","Alert","Spinner","Modal","ethers","toast","useTranslation","AuthContext","formatTimestamp","isElectionActive","validateApiUrl","safeParseInt","validateElectionStatus","handleApiError","createLoadingState","updateLoadingState","jsxDEV","_jsxDEV","Fragment","_Fragment","VotingInterface","_s","t","id","navigate","electionState","setElectionState","election","data","voterStatus","setVoterStatus","isRegistered","hasVoted","selectedCandidate","setSelectedCandidate","submitting","setSubmitting","showConfirmModal","setShowConfirmModal","isAuthenticated","userAddress","contract","signer","error","setError","apiUrl","process","env","REACT_APP_API_URL","fetchElectionDetails","checkVoterStatus","loading","Error","response","fetch","json","success","message","errorMessage","token","localStorage","getItem","headers","status","setTimeout","info","handleCandidateChange","e","target","value","handleSubmit","preventDefault","confirmVote","prepResponse","method","body","JSON","stringify","electionId","candidateId","prepData","contractWithSigner","connect","tx","castVote","receipt","wait","console","className","children","animation","role","variant","fileName","_jsxFileName","lineNumber","columnNumber","onClick","candidates","length","Body","Title","title","Text","description","startTime","endTime","lg","Header","onSubmit","map","candidate","toString","Check","type","name","checked","onChange","label","size","disabled","as","show","onHide","centered","closeButton","parseInt","Footer","_c","$RefreshReg$"],"sources":["C:/Users/katri/CascadeProjects/blockchain-voting-platform/client/src/components/voting/VotingInterface.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Container, Card, Row, Col, Form, Button, Alert, Spinner, Modal } from 'react-bootstrap';\nimport { ethers } from 'ethers';\nimport { toast } from 'react-toastify';\nimport { useTranslation } from 'react-i18next';\nimport AuthContext from '../../context/AuthContext';\nimport { formatTimestamp, isElectionActive } from '../../utils/contractUtils';\nimport { validateApiUrl, safeParseInt, validateElectionStatus, handleApiError, createLoadingState, updateLoadingState } from '../../utils/validationUtils';\n\nconst VotingInterface = () => {\n  const { t } = useTranslation();\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [electionState, setElectionState] = useState(createLoadingState());\n  const election = electionState.data;\n  const [voterStatus, setVoterStatus] = useState({ isRegistered: false, hasVoted: false });\n  const [selectedCandidate, setSelectedCandidate] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\n  const { isAuthenticated, userAddress, contract, signer } = useContext(AuthContext);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    if (!isAuthenticated) {\n      navigate('/login');\n      return;\n    }\n    \n    const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n    if (!validateApiUrl(apiUrl)) {\n      navigate('/error');\n      return;\n    }\n    \n    fetchElectionDetails();\n  }, [id, isAuthenticated, navigate]);\n\n  useEffect(() => {\n    if (isAuthenticated && userAddress && electionState.data) {\n      checkVoterStatus();\n    }\n  }, [isAuthenticated, userAddress, electionState.data]);\n\n  const fetchElectionDetails = async () => {\n    try {\n      setElectionState(updateLoadingState(electionState, { loading: true }));\n      \n      const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n      if (!validateApiUrl(apiUrl)) {\n        throw new Error('URL de API inválida');\n      }\n\n      const response = await fetch(`${apiUrl}/api/elections/${id}`);\n      const data = await response.json();\n      \n      if (!data?.success) {\n        throw new Error(data?.message || 'Error al obtener detalles de la elección');\n      }\n      \n      const election = data.election;\n      if (!validateElectionStatus(election)) {\n        navigate(`/elections/${id}`);\n        return;\n      }\n      \n      setElectionState(updateLoadingState(electionState, { data: election }));\n    } catch (error) {\n      const errorMessage = handleApiError(error);\n      setElectionState(updateLoadingState(electionState, { error: errorMessage }));\n    } finally {\n      setElectionState(updateLoadingState(electionState, { loading: false }));\n    }\n  };\n\n  const checkVoterStatus = async () => {\n    try {\n      if (!isAuthenticated || !userAddress) return;\n      \n      const token = localStorage.getItem('auth_token');\n      if (!token) {\n        throw new Error('Token de autenticación no encontrado');\n      }\n      \n      const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n      if (!validateApiUrl(apiUrl)) {\n        throw new Error('URL de API inválida');\n      }\n\n      const response = await fetch(\n        `${apiUrl}/api/voters/status/${id}`,\n        {\n          headers: {\n            'x-auth-token': token,\n            'Content-Type': 'application/json'\n          }\n        }\n      );\n      \n      const data = await response.json();\n      \n      if (!data?.success) {\n        throw new Error(data?.message || 'Error al verificar estado de votante');\n      }\n      \n      const status = data.status;\n      setVoterStatus(status);\n      \n      // Redirect if not registered or already voted\n      if (!status.isRegistered) {\n        toast.error('No estás registrado para esta elección');\n        setTimeout(() => navigate(`/elections/${id}`), 2000);\n      } else if (status.hasVoted) {\n        toast.info('Ya has votado en esta elección');\n        setTimeout(() => navigate(`/elections/${id}`), 2000);\n      }\n    } catch (error) {\n      const errorMessage = handleApiError(error);\n      toast.error(errorMessage);\n    }\n  };\n\n  const handleCandidateChange = (e) => {\n    setSelectedCandidate(e.target.value);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!selectedCandidate) {\n      toast.error('Please select a candidate');\n      return;\n    }\n    setShowConfirmModal(true);\n  };\n\n  const confirmVote = async () => {\n    try {\n      setSubmitting(true);\n      \n      // Close the modal\n      setShowConfirmModal(false);\n      \n      if (!contract || !signer) {\n        throw new Error('Blockchain connection not established');\n      }\n      \n      // Get the JWT token for authentication\n      const token = localStorage.getItem('auth_token');\n      \n      // Step 1: Get transaction data from the server\n      const prepResponse = await fetch(\n        `${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/api/voters/vote`,\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'x-auth-token': token\n          },\n          body: JSON.stringify({\n            electionId: id,\n            candidateId: selectedCandidate\n          })\n        }\n      );\n      \n      const prepData = await prepResponse.json();\n      \n      if (!prepData.success) {\n        throw new Error(prepData.message || 'Failed to prepare vote transaction');\n      }\n      \n      // Step 2: Sign and send the transaction\n      const contractWithSigner = contract.connect(signer);\n      \n      toast.info('Please confirm the transaction in your wallet');\n      \n      // Execute the vote transaction\n      const tx = await contractWithSigner.castVote(id, selectedCandidate);\n      \n      toast.info('Transaction submitted. Waiting for confirmation...');\n      \n      // Wait for transaction confirmation\n      const receipt = await tx.wait();\n      \n      toast.success('Your vote has been successfully recorded on the blockchain!');\n      \n      // Redirect to election details page\n      navigate(`/elections/${id}`);\n    } catch (error) {\n      console.error('Error casting vote:', error);\n      setError(error.message || 'Failed to cast vote. Please try again.');\n      toast.error(error.message || 'Failed to cast vote');\n    } finally {\n      setSubmitting(false);\n      setShowConfirmModal(false);\n    }\n  };\n\n  if (electionState.loading) {\n    return (\n      <Container className=\"text-center my-5\">\n        <Spinner animation=\"border\" role=\"status\" variant=\"primary\">\n          <span className=\"visually-hidden\">Loading...</span>\n        </Spinner>\n        <p className=\"mt-3\">Loading voting interface...</p>\n      </Container>\n    );\n  }\n\n  if (error) {\n    return (\n      <Container className=\"my-5\">\n        <Alert variant=\"danger\">{error}</Alert>\n        <Button variant=\"primary\" onClick={fetchElectionDetails}>Retry</Button>\n        <Button variant=\"outline-secondary\" className=\"ms-2\" onClick={() => navigate(`/elections/${id}`)}>\n          Back to Election\n        </Button>\n      </Container>\n    );\n  }\n\n  if (!election || !election.candidates || election.candidates.length === 0) {\n    return (\n      <Container className=\"my-5\">\n        <Alert variant=\"warning\">{t('voting.no_candidates_available')}</Alert>\n        <Button variant=\"outline-secondary\" onClick={() => navigate(`/elections/${id}`)}>\n          {t('election_details.back_button')}\n        </Button>\n      </Container>\n    );\n  }\n\n  return (\n    <Container>\n      <h2 className=\"mb-4\">Cast Your Vote</h2>\n      \n      <Card className=\"mb-4 shadow-sm\">\n        <Card.Body>\n          <Card.Title>{election.title}</Card.Title>\n          <Card.Text>{election.description}</Card.Text>\n          <div className=\"small text-muted\">\n            <div><strong>Start:</strong> {formatTimestamp(election.startTime)}</div>\n            <div><strong>End:</strong> {formatTimestamp(election.endTime)}</div>\n          </div>\n        </Card.Body>\n      </Card>\n      \n      <Row>\n        <Col lg={8}>\n          <Card className=\"shadow-sm\">\n            <Card.Header>\n              <h5 className=\"mb-0\">Select a Candidate</h5>\n            </Card.Header>\n            <Card.Body>\n              <Form onSubmit={handleSubmit}>\n                {election.candidates.map((candidate) => (\n                  <div key={candidate.id} className=\"mb-3\">\n                    <Card className={`border ${selectedCandidate === candidate.id.toString() ? 'border-primary' : ''}`}>\n                      <Card.Body>\n                        <Form.Check\n                          type=\"radio\"\n                          id={`candidate-${candidate.id}`}\n                          name=\"candidateSelection\"\n                          value={candidate.id}\n                          checked={selectedCandidate === candidate.id.toString()}\n                          onChange={handleCandidateChange}\n                          label={\n                            <div>\n                              <h5>{candidate.name}</h5>\n                              <p className=\"mb-0 text-muted\">{candidate.description}</p>\n                            </div>\n                          }\n                          className=\"d-flex align-items-start gap-3\"\n                        />\n                      </Card.Body>\n                    </Card>\n                  </div>\n                ))}\n                \n                <div className=\"d-grid gap-2 mt-4\">\n                  <Button\n                    type=\"submit\"\n                    variant=\"primary\"\n                    size=\"lg\"\n                    disabled={!selectedCandidate || submitting}\n                  >\n                    {submitting ? (\n                      <>\n                        <Spinner\n                          as=\"span\"\n                          animation=\"border\"\n                          size=\"sm\"\n                          role=\"status\"\n                          aria-hidden=\"true\"\n                          className=\"me-2\"\n                        />\n                        Processing...\n                      </>\n                    ) : (\n                      'Submit Vote'\n                    )}\n                  </Button>\n                  <Button\n                    variant=\"outline-secondary\"\n                    onClick={() => navigate(`/elections/${id}`)}\n                    disabled={submitting}\n                  >\n                    Cancel\n                  </Button>\n                </div>\n              </Form>\n            </Card.Body>\n          </Card>\n        </Col>\n        \n        <Col lg={4}>\n          <Card className=\"shadow-sm\">\n            <Card.Header>\n              <h5 className=\"mb-0\">Voting Information</h5>\n            </Card.Header>\n            <Card.Body>\n              <Alert variant=\"info\">\n                <i className=\"fas fa-info-circle me-2\"></i>\n                Your vote will be securely recorded on the blockchain. This requires a small transaction fee.\n              </Alert>\n              \n              <div className=\"mb-3\">\n                <h6>How Voting Works:</h6>\n                <ol className=\"small ps-3\">\n                  <li>Select your preferred candidate</li>\n                  <li>Confirm your selection</li>\n                  <li>Sign the transaction with your wallet</li>\n                  <li>Wait for blockchain confirmation</li>\n                </ol>\n              </div>\n              \n              <div className=\"mb-3\">\n                <h6>Important Notes:</h6>\n                <ul className=\"small ps-3\">\n                  <li>Your vote is anonymous</li>\n                  <li>You can only vote once</li>\n                  <li>Votes cannot be changed after submission</li>\n                  <li>You need enough ETH in your wallet for gas fees</li>\n                </ul>\n              </div>\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n      \n      {/* Confirmation Modal */}\n      <Modal show={showConfirmModal} onHide={() => setShowConfirmModal(false)} centered>\n        <Modal.Header closeButton>\n          <Modal.Title>Confirm Your Vote</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          {election.candidates && selectedCandidate !== '' && (\n            <>\n              <p>You are about to vote for:</p>\n              <h4 className=\"mb-3\">{election.candidates[parseInt(selectedCandidate)].name}</h4>\n              <Alert variant=\"warning\">\n                <i className=\"fas fa-exclamation-triangle me-2\"></i>\n                This action cannot be undone once confirmed on the blockchain.\n              </Alert>\n            </>\n          )}\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={() => setShowConfirmModal(false)} disabled={submitting}>\n            Cancel\n          </Button>\n          <Button variant=\"primary\" onClick={confirmVote} disabled={submitting}>\n            {submitting ? (\n              <>\n                <Spinner\n                  as=\"span\"\n                  animation=\"border\"\n                  size=\"sm\"\n                  role=\"status\"\n                  aria-hidden=\"true\"\n                  className=\"me-2\"\n                />\n                Processing...\n              </>\n            ) : (\n              'Confirm Vote'\n            )}\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </Container>\n  );\n};\n\nexport default VotingInterface;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}