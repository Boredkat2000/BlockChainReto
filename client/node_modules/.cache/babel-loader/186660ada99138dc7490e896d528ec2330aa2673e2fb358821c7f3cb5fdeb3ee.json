{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\katri\\\\CascadeProjects\\\\blockchain-voting-platform\\\\client\\\\src\\\\components\\\\voting\\\\VotingInterface.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Container, Card, Row, Col, Form, Button, Alert, Spinner, Modal } from 'react-bootstrap';\nimport { ethers } from 'ethers';\nimport { toast } from 'react-toastify';\nimport AuthContext from '../../context/AuthContext';\nimport { formatTimestamp, isElectionActive } from '../../utils/contractUtils';\nimport { validateApiUrl, safeParseInt, validateElectionStatus, handleApiError, createLoadingState, updateLoadingState } from '../../utils/validationUtils';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst VotingInterface = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [electionState, setElectionState] = useState(createLoadingState());\n  const [voterStatus, setVoterStatus] = useState({\n    isRegistered: false,\n    hasVoted: false\n  });\n  const [selectedCandidate, setSelectedCandidate] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\n  const {\n    isAuthenticated,\n    userAddress,\n    contract,\n    signer\n  } = useContext(AuthContext);\n  useEffect(() => {\n    if (!isAuthenticated) {\n      navigate('/login');\n      return;\n    }\n    const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n    if (!validateApiUrl(apiUrl)) {\n      navigate('/error');\n      return;\n    }\n    fetchElectionDetails();\n  }, [id, isAuthenticated, navigate]);\n  useEffect(() => {\n    if (isAuthenticated && userAddress && electionState.data) {\n      checkVoterStatus();\n    }\n  }, [isAuthenticated, userAddress, electionState.data]);\n  const fetchElectionDetails = async () => {\n    try {\n      setElectionState(updateLoadingState(electionState, {\n        loading: true\n      }));\n      const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n      if (!validateApiUrl(apiUrl)) {\n        throw new Error('URL de API inválida');\n      }\n      const response = await fetch(`${apiUrl}/api/elections/${id}`);\n      const data = await response.json();\n      if (!(data !== null && data !== void 0 && data.success)) {\n        throw new Error((data === null || data === void 0 ? void 0 : data.message) || 'Error al obtener detalles de la elección');\n      }\n      const election = data.election;\n      if (!validateElectionStatus(election)) {\n        navigate(`/elections/${id}`);\n        return;\n      }\n      setElectionState(updateLoadingState(electionState, {\n        data: election\n      }));\n    } catch (error) {\n      const errorMessage = handleApiError(error);\n      setElectionState(updateLoadingState(electionState, {\n        error: errorMessage\n      }));\n    } finally {\n      setElectionState(updateLoadingState(electionState, {\n        loading: false\n      }));\n    }\n  };\n  useEffect(() => {\n    if (isAuthenticated && userAddress && election) {\n      checkVoterStatus();\n    }\n  }, [isAuthenticated, userAddress, election]);\n  const checkVoterStatus = async () => {\n    try {\n      if (!isAuthenticated || !userAddress) return;\n      const token = localStorage.getItem('auth_token');\n      if (!token) {\n        throw new Error('Token de autenticación no encontrado');\n      }\n      const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n      if (!validateApiUrl(apiUrl)) {\n        throw new Error('URL de API inválida');\n      }\n      const response = await fetch(`${apiUrl}/api/voters/status/${id}`, {\n        headers: {\n          'x-auth-token': token,\n          'Content-Type': 'application/json'\n        }\n      });\n      const data = await response.json();\n      if (!(data !== null && data !== void 0 && data.success)) {\n        throw new Error((data === null || data === void 0 ? void 0 : data.message) || 'Error al verificar estado de votante');\n      }\n      const status = data.status;\n      setVoterStatus(status);\n\n      // Redirect if not registered or already voted\n      if (!status.isRegistered) {\n        toast.error('No estás registrado para esta elección');\n        setTimeout(() => navigate(`/elections/${id}`), 2000);\n      } else if (status.hasVoted) {\n        toast.info('Ya has votado en esta elección');\n        setTimeout(() => navigate(`/elections/${id}`), 2000);\n      }\n    } catch (error) {\n      const errorMessage = handleApiError(error);\n      toast.error(errorMessage);\n    }\n  };\n  const handleCandidateChange = e => {\n    setSelectedCandidate(e.target.value);\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!selectedCandidate) {\n      toast.error('Please select a candidate');\n      return;\n    }\n    setShowConfirmModal(true);\n  };\n  const confirmVote = async () => {\n    try {\n      setSubmitting(true);\n\n      // Close the modal\n      setShowConfirmModal(false);\n      if (!contract || !signer) {\n        throw new Error('Blockchain connection not established');\n      }\n\n      // Get the JWT token for authentication\n      const token = localStorage.getItem('auth_token');\n\n      // Step 1: Get transaction data from the server\n      const prepResponse = await fetch(`${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/api/voters/vote`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-auth-token': token\n        },\n        body: JSON.stringify({\n          electionId: id,\n          candidateId: selectedCandidate\n        })\n      });\n      const prepData = await prepResponse.json();\n      if (!prepData.success) {\n        throw new Error(prepData.message || 'Failed to prepare vote transaction');\n      }\n\n      // Step 2: Sign and send the transaction\n      const contractWithSigner = contract.connect(signer);\n      toast.info('Please confirm the transaction in your wallet');\n\n      // Execute the vote transaction\n      const tx = await contractWithSigner.castVote(id, selectedCandidate);\n      toast.info('Transaction submitted. Waiting for confirmation...');\n\n      // Wait for transaction confirmation\n      const receipt = await tx.wait();\n      toast.success('Your vote has been successfully recorded on the blockchain!');\n\n      // Redirect to election details page\n      navigate(`/elections/${id}`);\n    } catch (error) {\n      console.error('Error casting vote:', error);\n      setError(error.message || 'Failed to cast vote. Please try again.');\n      toast.error(error.message || 'Failed to cast vote');\n    } finally {\n      setSubmitting(false);\n      setShowConfirmModal(false);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"text-center my-5\",\n      children: [/*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\",\n        role: \"status\",\n        variant: \"primary\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"visually-hidden\",\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-3\",\n        children: \"Loading voting interface...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"my-5\",\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: fetchElectionDetails,\n        children: \"Retry\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outline-secondary\",\n        className: \"ms-2\",\n        onClick: () => navigate(`/elections/${id}`),\n        children: \"Back to Election\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this);\n  }\n  if (!election || !election.candidates || election.candidates.length === 0) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"my-5\",\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"warning\",\n        children: \"Election information is unavailable or has no candidates.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outline-secondary\",\n        onClick: () => navigate(`/elections/${id}`),\n        children: \"Back to Election\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"mb-4\",\n      children: \"Cast Your Vote\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"mb-4 shadow-sm\",\n      children: /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n          children: election.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n          children: election.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"small text-muted\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Start:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 18\n            }, this), \" \", formatTimestamp(election.startTime)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"End:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 18\n            }, this), \" \", formatTimestamp(election.endTime)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        lg: 8,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"shadow-sm\",\n          children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n            children: /*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"mb-0\",\n              children: \"Select a Candidate\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: /*#__PURE__*/_jsxDEV(Form, {\n              onSubmit: handleSubmit,\n              children: [election.candidates.map(candidate => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-3\",\n                children: /*#__PURE__*/_jsxDEV(Card, {\n                  className: `border ${selectedCandidate === candidate.id.toString() ? 'border-primary' : ''}`,\n                  children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                    children: /*#__PURE__*/_jsxDEV(Form.Check, {\n                      type: \"radio\",\n                      id: `candidate-${candidate.id}`,\n                      name: \"candidateSelection\",\n                      value: candidate.id,\n                      checked: selectedCandidate === candidate.id.toString(),\n                      onChange: handleCandidateChange,\n                      label: /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                          children: candidate.name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 275,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"mb-0 text-muted\",\n                          children: candidate.description\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 276,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 274,\n                        columnNumber: 29\n                      }, this),\n                      className: \"d-flex align-items-start gap-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 266,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 265,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 264,\n                  columnNumber: 21\n                }, this)\n              }, candidate.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 19\n              }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-grid gap-2 mt-4\",\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  variant: \"primary\",\n                  size: \"lg\",\n                  disabled: !selectedCandidate || submitting,\n                  children: submitting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(Spinner, {\n                      as: \"span\",\n                      animation: \"border\",\n                      size: \"sm\",\n                      role: \"status\",\n                      \"aria-hidden\": \"true\",\n                      className: \"me-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 295,\n                      columnNumber: 25\n                    }, this), \"Processing...\"]\n                  }, void 0, true) : 'Submit Vote'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outline-secondary\",\n                  onClick: () => navigate(`/elections/${id}`),\n                  disabled: submitting,\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        lg: 4,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"shadow-sm\",\n          children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n            children: /*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"mb-0\",\n              children: \"Voting Information\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(Alert, {\n              variant: \"info\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-info-circle me-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 17\n              }, this), \"Your vote will be securely recorded on the blockchain. This requires a small transaction fee.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                children: \"How Voting Works:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n                className: \"small ps-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Select your preferred candidate\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 336,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Confirm your selection\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Sign the transaction with your wallet\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Wait for blockchain confirmation\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                children: \"Important Notes:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"small ps-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Your vote is anonymous\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 346,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"You can only vote once\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"Votes cannot be changed after submission\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"You need enough ETH in your wallet for gas fees\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 349,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showConfirmModal,\n      onHide: () => setShowConfirmModal(false),\n      centered: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Confirm Your Vote\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: election.candidates && selectedCandidate !== '' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"You are about to vote for:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"mb-3\",\n            children: election.candidates[parseInt(selectedCandidate)].name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Alert, {\n            variant: \"warning\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-exclamation-triangle me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 17\n            }, this), \"This action cannot be undone once confirmed on the blockchain.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: () => setShowConfirmModal(false),\n          disabled: submitting,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: confirmVote,\n          disabled: submitting,\n          children: submitting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Spinner, {\n              as: \"span\",\n              animation: \"border\",\n              size: \"sm\",\n              role: \"status\",\n              \"aria-hidden\": \"true\",\n              className: \"me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 17\n            }, this), \"Processing...\"]\n          }, void 0, true) : 'Confirm Vote'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 240,\n    columnNumber: 5\n  }, this);\n};\n_s(VotingInterface, \"YCIwksSbewaAN3PYyrxvabrT5qg=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = VotingInterface;\nexport default VotingInterface;\nvar _c;\n$RefreshReg$(_c, \"VotingInterface\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useCallback","useParams","useNavigate","Container","Card","Row","Col","Form","Button","Alert","Spinner","Modal","ethers","toast","AuthContext","formatTimestamp","isElectionActive","validateApiUrl","safeParseInt","validateElectionStatus","handleApiError","createLoadingState","updateLoadingState","jsxDEV","_jsxDEV","Fragment","_Fragment","VotingInterface","_s","id","navigate","electionState","setElectionState","voterStatus","setVoterStatus","isRegistered","hasVoted","selectedCandidate","setSelectedCandidate","submitting","setSubmitting","showConfirmModal","setShowConfirmModal","isAuthenticated","userAddress","contract","signer","apiUrl","process","env","REACT_APP_API_URL","fetchElectionDetails","data","checkVoterStatus","loading","Error","response","fetch","json","success","message","election","error","errorMessage","token","localStorage","getItem","headers","status","setTimeout","info","handleCandidateChange","e","target","value","handleSubmit","preventDefault","confirmVote","prepResponse","method","body","JSON","stringify","electionId","candidateId","prepData","contractWithSigner","connect","tx","castVote","receipt","wait","console","setError","className","children","animation","role","variant","fileName","_jsxFileName","lineNumber","columnNumber","onClick","candidates","length","Body","Title","title","Text","description","startTime","endTime","lg","Header","onSubmit","map","candidate","toString","Check","type","name","checked","onChange","label","size","disabled","as","show","onHide","centered","closeButton","parseInt","Footer","_c","$RefreshReg$"],"sources":["C:/Users/katri/CascadeProjects/blockchain-voting-platform/client/src/components/voting/VotingInterface.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Container, Card, Row, Col, Form, Button, Alert, Spinner, Modal } from 'react-bootstrap';\nimport { ethers } from 'ethers';\nimport { toast } from 'react-toastify';\nimport AuthContext from '../../context/AuthContext';\nimport { formatTimestamp, isElectionActive } from '../../utils/contractUtils';\nimport { validateApiUrl, safeParseInt, validateElectionStatus, handleApiError, createLoadingState, updateLoadingState } from '../../utils/validationUtils';\n\nconst VotingInterface = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [electionState, setElectionState] = useState(createLoadingState());\n  const [voterStatus, setVoterStatus] = useState({ isRegistered: false, hasVoted: false });\n  const [selectedCandidate, setSelectedCandidate] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\n  const { isAuthenticated, userAddress, contract, signer } = useContext(AuthContext);\n\n  useEffect(() => {\n    if (!isAuthenticated) {\n      navigate('/login');\n      return;\n    }\n    \n    const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n    if (!validateApiUrl(apiUrl)) {\n      navigate('/error');\n      return;\n    }\n    \n    fetchElectionDetails();\n  }, [id, isAuthenticated, navigate]);\n\n  useEffect(() => {\n    if (isAuthenticated && userAddress && electionState.data) {\n      checkVoterStatus();\n    }\n  }, [isAuthenticated, userAddress, electionState.data]);\n\n  const fetchElectionDetails = async () => {\n    try {\n      setElectionState(updateLoadingState(electionState, { loading: true }));\n      \n      const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n      if (!validateApiUrl(apiUrl)) {\n        throw new Error('URL de API inválida');\n      }\n\n      const response = await fetch(`${apiUrl}/api/elections/${id}`);\n      const data = await response.json();\n      \n      if (!data?.success) {\n        throw new Error(data?.message || 'Error al obtener detalles de la elección');\n      }\n      \n      const election = data.election;\n      if (!validateElectionStatus(election)) {\n        navigate(`/elections/${id}`);\n        return;\n      }\n      \n      setElectionState(updateLoadingState(electionState, { data: election }));\n    } catch (error) {\n      const errorMessage = handleApiError(error);\n      setElectionState(updateLoadingState(electionState, { error: errorMessage }));\n    } finally {\n      setElectionState(updateLoadingState(electionState, { loading: false }));\n    }\n  };\n\n\n\n  useEffect(() => {\n    if (isAuthenticated && userAddress && election) {\n      checkVoterStatus();\n    }\n  }, [isAuthenticated, userAddress, election]);\n\n  \n  const checkVoterStatus = async () => {\n    try {\n      if (!isAuthenticated || !userAddress) return;\n      \n      const token = localStorage.getItem('auth_token');\n      if (!token) {\n        throw new Error('Token de autenticación no encontrado');\n      }\n      \n      const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n      if (!validateApiUrl(apiUrl)) {\n        throw new Error('URL de API inválida');\n      }\n\n      const response = await fetch(\n        `${apiUrl}/api/voters/status/${id}`,\n        {\n          headers: {\n            'x-auth-token': token,\n            'Content-Type': 'application/json'\n          }\n        }\n      );\n      \n      const data = await response.json();\n      \n      if (!data?.success) {\n        throw new Error(data?.message || 'Error al verificar estado de votante');\n      }\n      \n      const status = data.status;\n      setVoterStatus(status);\n      \n      // Redirect if not registered or already voted\n      if (!status.isRegistered) {\n        toast.error('No estás registrado para esta elección');\n        setTimeout(() => navigate(`/elections/${id}`), 2000);\n      } else if (status.hasVoted) {\n        toast.info('Ya has votado en esta elección');\n        setTimeout(() => navigate(`/elections/${id}`), 2000);\n      }\n    } catch (error) {\n      const errorMessage = handleApiError(error);\n      toast.error(errorMessage);\n    }\n  };\n\n\n  const handleCandidateChange = (e) => {\n    setSelectedCandidate(e.target.value);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!selectedCandidate) {\n      toast.error('Please select a candidate');\n      return;\n    }\n    setShowConfirmModal(true);\n  };\n\n  const confirmVote = async () => {\n    try {\n      setSubmitting(true);\n      \n      // Close the modal\n      setShowConfirmModal(false);\n      \n      if (!contract || !signer) {\n        throw new Error('Blockchain connection not established');\n      }\n      \n      // Get the JWT token for authentication\n      const token = localStorage.getItem('auth_token');\n      \n      // Step 1: Get transaction data from the server\n      const prepResponse = await fetch(\n        `${process.env.REACT_APP_API_URL || 'http://localhost:5000'}/api/voters/vote`,\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'x-auth-token': token\n          },\n          body: JSON.stringify({\n            electionId: id,\n            candidateId: selectedCandidate\n          })\n        }\n      );\n      \n      const prepData = await prepResponse.json();\n      \n      if (!prepData.success) {\n        throw new Error(prepData.message || 'Failed to prepare vote transaction');\n      }\n      \n      // Step 2: Sign and send the transaction\n      const contractWithSigner = contract.connect(signer);\n      \n      toast.info('Please confirm the transaction in your wallet');\n      \n      // Execute the vote transaction\n      const tx = await contractWithSigner.castVote(id, selectedCandidate);\n      \n      toast.info('Transaction submitted. Waiting for confirmation...');\n      \n      // Wait for transaction confirmation\n      const receipt = await tx.wait();\n      \n      toast.success('Your vote has been successfully recorded on the blockchain!');\n      \n      // Redirect to election details page\n      navigate(`/elections/${id}`);\n    } catch (error) {\n      console.error('Error casting vote:', error);\n      setError(error.message || 'Failed to cast vote. Please try again.');\n      toast.error(error.message || 'Failed to cast vote');\n    } finally {\n      setSubmitting(false);\n      setShowConfirmModal(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <Container className=\"text-center my-5\">\n        <Spinner animation=\"border\" role=\"status\" variant=\"primary\">\n          <span className=\"visually-hidden\">Loading...</span>\n        </Spinner>\n        <p className=\"mt-3\">Loading voting interface...</p>\n      </Container>\n    );\n  }\n\n  if (error) {\n    return (\n      <Container className=\"my-5\">\n        <Alert variant=\"danger\">{error}</Alert>\n        <Button variant=\"primary\" onClick={fetchElectionDetails}>Retry</Button>\n        <Button variant=\"outline-secondary\" className=\"ms-2\" onClick={() => navigate(`/elections/${id}`)}>\n          Back to Election\n        </Button>\n      </Container>\n    );\n  }\n\n  if (!election || !election.candidates || election.candidates.length === 0) {\n    return (\n      <Container className=\"my-5\">\n        <Alert variant=\"warning\">Election information is unavailable or has no candidates.</Alert>\n        <Button variant=\"outline-secondary\" onClick={() => navigate(`/elections/${id}`)}>\n          Back to Election\n        </Button>\n      </Container>\n    );\n  }\n\n  return (\n    <Container>\n      <h2 className=\"mb-4\">Cast Your Vote</h2>\n      \n      <Card className=\"mb-4 shadow-sm\">\n        <Card.Body>\n          <Card.Title>{election.title}</Card.Title>\n          <Card.Text>{election.description}</Card.Text>\n          <div className=\"small text-muted\">\n            <div><strong>Start:</strong> {formatTimestamp(election.startTime)}</div>\n            <div><strong>End:</strong> {formatTimestamp(election.endTime)}</div>\n          </div>\n        </Card.Body>\n      </Card>\n      \n      <Row>\n        <Col lg={8}>\n          <Card className=\"shadow-sm\">\n            <Card.Header>\n              <h5 className=\"mb-0\">Select a Candidate</h5>\n            </Card.Header>\n            <Card.Body>\n              <Form onSubmit={handleSubmit}>\n                {election.candidates.map((candidate) => (\n                  <div key={candidate.id} className=\"mb-3\">\n                    <Card className={`border ${selectedCandidate === candidate.id.toString() ? 'border-primary' : ''}`}>\n                      <Card.Body>\n                        <Form.Check\n                          type=\"radio\"\n                          id={`candidate-${candidate.id}`}\n                          name=\"candidateSelection\"\n                          value={candidate.id}\n                          checked={selectedCandidate === candidate.id.toString()}\n                          onChange={handleCandidateChange}\n                          label={\n                            <div>\n                              <h5>{candidate.name}</h5>\n                              <p className=\"mb-0 text-muted\">{candidate.description}</p>\n                            </div>\n                          }\n                          className=\"d-flex align-items-start gap-3\"\n                        />\n                      </Card.Body>\n                    </Card>\n                  </div>\n                ))}\n                \n                <div className=\"d-grid gap-2 mt-4\">\n                  <Button\n                    type=\"submit\"\n                    variant=\"primary\"\n                    size=\"lg\"\n                    disabled={!selectedCandidate || submitting}\n                  >\n                    {submitting ? (\n                      <>\n                        <Spinner\n                          as=\"span\"\n                          animation=\"border\"\n                          size=\"sm\"\n                          role=\"status\"\n                          aria-hidden=\"true\"\n                          className=\"me-2\"\n                        />\n                        Processing...\n                      </>\n                    ) : (\n                      'Submit Vote'\n                    )}\n                  </Button>\n                  <Button\n                    variant=\"outline-secondary\"\n                    onClick={() => navigate(`/elections/${id}`)}\n                    disabled={submitting}\n                  >\n                    Cancel\n                  </Button>\n                </div>\n              </Form>\n            </Card.Body>\n          </Card>\n        </Col>\n        \n        <Col lg={4}>\n          <Card className=\"shadow-sm\">\n            <Card.Header>\n              <h5 className=\"mb-0\">Voting Information</h5>\n            </Card.Header>\n            <Card.Body>\n              <Alert variant=\"info\">\n                <i className=\"fas fa-info-circle me-2\"></i>\n                Your vote will be securely recorded on the blockchain. This requires a small transaction fee.\n              </Alert>\n              \n              <div className=\"mb-3\">\n                <h6>How Voting Works:</h6>\n                <ol className=\"small ps-3\">\n                  <li>Select your preferred candidate</li>\n                  <li>Confirm your selection</li>\n                  <li>Sign the transaction with your wallet</li>\n                  <li>Wait for blockchain confirmation</li>\n                </ol>\n              </div>\n              \n              <div className=\"mb-3\">\n                <h6>Important Notes:</h6>\n                <ul className=\"small ps-3\">\n                  <li>Your vote is anonymous</li>\n                  <li>You can only vote once</li>\n                  <li>Votes cannot be changed after submission</li>\n                  <li>You need enough ETH in your wallet for gas fees</li>\n                </ul>\n              </div>\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n      \n      {/* Confirmation Modal */}\n      <Modal show={showConfirmModal} onHide={() => setShowConfirmModal(false)} centered>\n        <Modal.Header closeButton>\n          <Modal.Title>Confirm Your Vote</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          {election.candidates && selectedCandidate !== '' && (\n            <>\n              <p>You are about to vote for:</p>\n              <h4 className=\"mb-3\">{election.candidates[parseInt(selectedCandidate)].name}</h4>\n              <Alert variant=\"warning\">\n                <i className=\"fas fa-exclamation-triangle me-2\"></i>\n                This action cannot be undone once confirmed on the blockchain.\n              </Alert>\n            </>\n          )}\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={() => setShowConfirmModal(false)} disabled={submitting}>\n            Cancel\n          </Button>\n          <Button variant=\"primary\" onClick={confirmVote} disabled={submitting}>\n            {submitting ? (\n              <>\n                <Spinner\n                  as=\"span\"\n                  animation=\"border\"\n                  size=\"sm\"\n                  role=\"status\"\n                  aria-hidden=\"true\"\n                  className=\"me-2\"\n                />\n                Processing...\n              </>\n            ) : (\n              'Confirm Vote'\n            )}\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </Container>\n  );\n};\n\nexport default VotingInterface;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}